!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(h){"use strict";h.registerHelper("fold","brace",function(i,o){var l,f=o.line,s=i.getLine(f);function e(e){for(var r=o.ch,n=0;;){var t=r<=0?-1:s.lastIndexOf(e,r-1);if(-1!=t){if(1==n&&t<o.ch)break;if(l=i.getTokenTypeAt(h.Pos(f,t+1)),!/^(comment|string)/.test(l))return t+1;r=t-1}else{if(1==n)break;n=1,r=s.length}}}var r,n,t,u=e("{"),a=e("[");if(null!=u&&(null==a||u<a))t=u,r="{",n="}";else{if(null==a)return;t=a,r="[",n="]"}var d,c,g=1,v=i.lastLine();e:for(var p=f;p<=v;++p)for(var m=i.getLine(p),P=p==f?t:0;;){var k=m.indexOf(r,P),b=m.indexOf(n,P);if(k<0&&(k=m.length),b<0&&(b=m.length),(P=Math.min(k,b))==m.length)break;if(i.getTokenTypeAt(h.Pos(p,P+1))==l)if(P==k)++g;else if(!--g){d=p,c=P;break e}++P}if(null!=d&&f!=d)return{from:h.Pos(f,t),to:h.Pos(d,c)}}),h.registerHelper("fold","import",function(o,e){function r(e){if(e<o.firstLine()||e>o.lastLine())return null;var r=o.getTokenAt(h.Pos(e,1));if(/\S/.test(r.string)||(r=o.getTokenAt(h.Pos(e,r.end+1))),"keyword"!=r.type||"import"!=r.string)return null;for(var n=e,t=Math.min(o.lastLine(),e+10);n<=t;++n){var i=o.getLine(n).indexOf(";");if(-1!=i)return{startCh:r.end,end:h.Pos(n,i)}}}var n=e.line,t=r(n);if(!t||r(n-1)||(e=r(n-2))&&e.end.line==n-1)return null;for(var i=t.end;;){var l=r(i.line+1);if(null==l)break;i=l.end}return{from:o.clipPos(h.Pos(n,t.startCh+1)),to:i}}),h.registerHelper("fold","include",function(n,e){function r(e){if(e<n.firstLine()||e>n.lastLine())return null;var r=n.getTokenAt(h.Pos(e,1));return/\S/.test(r.string)||(r=n.getTokenAt(h.Pos(e,r.end+1))),"meta"==r.type&&"#include"==r.string.slice(0,8)?r.start+8:void 0}var t=e.line,e=r(t);if(null==e||null!=r(t-1))return null;for(var i=t;;){if(null==r(i+1))break;++i}return{from:h.Pos(t,e+1),to:n.clipPos(h.Pos(i))}})});